(()=>{var u=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var y=u(()=>{var f="http://localhost:3000/v1/classify";async function l(s){let{auditLog:t=[]}=await new Promise(e=>chrome.storage.local.get("auditLog",e)),n=new Date().toISOString();t.unshift(`[${n}] ${s}`),t.length>50&&(t.length=50),await new Promise(e=>chrome.storage.local.set({auditLog:t},e))}chrome.runtime.onInstalled.addListener(()=>{chrome.storage.local.get("installationId",s=>{if(!s.installationId){let t=self.crypto.randomUUID();chrome.storage.local.set({installationId:t},()=>{console.log("Installation ID generated and stored:",t),l("Extension installed.")})}})});async function w(s){let{installationId:t,lastBackendFailTs:n}=await new Promise(e=>chrome.storage.local.get(["installationId","lastBackendFailTs"],e));if(n&&Date.now()-n<3e5){let e=`Backend is in backoff period. Skipping classification for ${s.length} videos.`;return console.log(e),l(e),null}try{let e=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videos:s,installationId:t})});if(!e.ok)throw new Error(`Backend request failed with status: ${e.status}`);await new Promise(o=>chrome.storage.local.remove("lastBackendFailTs",o));let r=await e.json(),i=`Successfully classified ${s.length} videos.`;return console.log(i),l(i),r.classifications}catch(e){console.error("Error classifying videos:",e);let r=`Failed to classify videos. Error: ${e.message}`;return l(r),await new Promise(i=>chrome.storage.local.set({lastBackendFailTs:Date.now()},i)),null}}chrome.alarms.onAlarm.addListener(async s=>{if(s.name==="process-video-queue"){let t=Array.from(m.values());if(m.clear(),t.length===0){l("Alarm triggered, but video queue was empty.");return}l(`Processing queue with ${t.length} videos.`);let n=await w(t);if(n){let e=await new Promise(o=>chrome.storage.local.get(null,o)),r=Object.keys(e).filter(o=>o.startsWith("video-classification-")),i={};for(let o in n){let c=n[o],a=`video-classification-${o}`;i[a]={classification:c,timestamp:Date.now()}}if(r.length+Object.keys(i).length>100){let o=r.map(d=>({key:d,timestamp:e[d].timestamp})).sort((d,h)=>d.timestamp-h.timestamp),c=Math.max(0,r.length+Object.keys(i).length-100),a=o.slice(0,c).map(d=>d.key);a.length>0&&(await new Promise(d=>chrome.storage.local.remove(a,d)),l(`Pruned ${a.length} old cache entries.`))}await new Promise(o=>chrome.storage.local.set(i,o)),l(`Cached ${Object.keys(i).length} new classifications.`),chrome.tabs.query({url:"*://www.youtube.com/*"},o=>{o.forEach(c=>{chrome.tabs.sendMessage(c.id,{type:"CLASSIFICATION_RESULT",classifications:n}).catch(a=>{a.message.includes("Receiving end does not exist")?console.log(`Content script in tab ${c.id} not ready to receive message.`):console.error(`Error sending message to tab ${c.id}:`,a)})})})}}});var m=new Map,g=10/60;chrome.runtime.onMessage.addListener((s,t,n)=>{if(s.type==="CLASSIFY_VIDEO"){let{videoId:e,metadata:r}=s,i=`video-classification-${e}`;return(async()=>{let c=(await new Promise(a=>chrome.storage.local.get(i,a)))[i];if(c&&Date.now()-c.timestamp<864e5){let a=`Returning cached classification for video ${e}: ${c.classification}`;console.log(a),l(a),n({classification:c.classification});return}console.log("No valid cache entry for videoId, adding to queue:",e),m.set(e,r),chrome.alarms.get("process-video-queue",a=>{a||(chrome.alarms.create("process-video-queue",{delayInMinutes:g}),l(`Alarm "process-video-queue" created with a ${g*60}s delay.`))}),n({status:"queued"})})(),!0}else s.type==="hidden_video_count"&&chrome.action.setBadgeText({text:s.count.toString()})})});y();})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL3NlcnZpY2Utd29ya2VyL2luZGV4LmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJjb25zdCBDQUNIRV9UVEwgPSAyNCAqIDM2MDAgKiAxMDAwOyAvLyAyNCBob3VycyBpbiBtaWxsaXNlY29uZHNcbmNvbnN0IE1BWF9DQUNIRV9FTlRSSUVTID0gMTAwO1xuY29uc3QgQkFDS0VORF9VUkwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3YxL2NsYXNzaWZ5JztcbmNvbnN0IEJBQ0tPRkZfRFVSQVRJT04gPSA1ICogNjAgKiAxMDAwOyAvLyA1IG1pbnV0ZXNcbmNvbnN0IEFVRElUX0xPR19NQVhfRU5UUklFUyA9IDUwO1xuXG5hc3luYyBmdW5jdGlvbiBhZGRBdWRpdExvZyhtZXNzYWdlKSB7XG4gICAgY29uc3QgeyBhdWRpdExvZyA9IFtdIH0gPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCgnYXVkaXRMb2cnLCByZXNvbHZlKSk7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGF1ZGl0TG9nLnVuc2hpZnQoYFske3RpbWVzdGFtcH1dICR7bWVzc2FnZX1gKTtcbiAgICBpZiAoYXVkaXRMb2cubGVuZ3RoID4gQVVESVRfTE9HX01BWF9FTlRSSUVTKSB7XG4gICAgICAgIGF1ZGl0TG9nLmxlbmd0aCA9IEFVRElUX0xPR19NQVhfRU5UUklFUztcbiAgICB9XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBhdWRpdExvZyB9LCByZXNvbHZlKSk7XG59XG5cbmNocm9tZS5ydW50aW1lLm9uSW5zdGFsbGVkLmFkZExpc3RlbmVyKCgpID0+IHtcbiAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCdpbnN0YWxsYXRpb25JZCcsIChyZXN1bHQpID0+IHtcbiAgICBpZiAoIXJlc3VsdC5pbnN0YWxsYXRpb25JZCkge1xuICAgICAgY29uc3QgaW5zdGFsbGF0aW9uSWQgPSBzZWxmLmNyeXB0by5yYW5kb21VVUlEKCk7XG4gICAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBpbnN0YWxsYXRpb25JZCB9LCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdJbnN0YWxsYXRpb24gSUQgZ2VuZXJhdGVkIGFuZCBzdG9yZWQ6JywgaW5zdGFsbGF0aW9uSWQpO1xuICAgICAgICBhZGRBdWRpdExvZygnRXh0ZW5zaW9uIGluc3RhbGxlZC4nKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcblxuYXN5bmMgZnVuY3Rpb24gY2xhc3NpZnlWaWRlb3ModmlkZW9zKSB7XG4gICAgY29uc3QgeyBpbnN0YWxsYXRpb25JZCwgbGFzdEJhY2tlbmRGYWlsVHMgfSA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFsnaW5zdGFsbGF0aW9uSWQnLCAnbGFzdEJhY2tlbmRGYWlsVHMnXSwgcmVzb2x2ZSkpO1xuXG4gICAgaWYgKGxhc3RCYWNrZW5kRmFpbFRzICYmIChEYXRlLm5vdygpIC0gbGFzdEJhY2tlbmRGYWlsVHMgPCBCQUNLT0ZGX0RVUkFUSU9OKSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYEJhY2tlbmQgaXMgaW4gYmFja29mZiBwZXJpb2QuIFNraXBwaW5nIGNsYXNzaWZpY2F0aW9uIGZvciAke3ZpZGVvcy5sZW5ndGh9IHZpZGVvcy5gO1xuICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgYWRkQXVkaXRMb2cobWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goQkFDS0VORF9VUkwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB2aWRlb3MsIGluc3RhbGxhdGlvbklkIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhY2tlbmQgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBjaHJvbWUuc3RvcmFnZS5sb2NhbC5yZW1vdmUoJ2xhc3RCYWNrZW5kRmFpbFRzJywgcmVzb2x2ZSkpO1xuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgU3VjY2Vzc2Z1bGx5IGNsYXNzaWZpZWQgJHt2aWRlb3MubGVuZ3RofSB2aWRlb3MuYDtcbiAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgIGFkZEF1ZGl0TG9nKG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gZGF0YS5jbGFzc2lmaWNhdGlvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xhc3NpZnlpbmcgdmlkZW9zOicsIGVycm9yKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBGYWlsZWQgdG8gY2xhc3NpZnkgdmlkZW9zLiBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICAgIGFkZEF1ZGl0TG9nKG1lc3NhZ2UpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7IGxhc3RCYWNrZW5kRmFpbFRzOiBEYXRlLm5vdygpIH0sIHJlc29sdmUpKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jaHJvbWUuYWxhcm1zLm9uQWxhcm0uYWRkTGlzdGVuZXIoYXN5bmMgKGFsYXJtKSA9PiB7XG4gICAgaWYgKGFsYXJtLm5hbWUgPT09ICdwcm9jZXNzLXZpZGVvLXF1ZXVlJykge1xuICAgICAgICBjb25zdCB2aWRlb3NUb1Byb2Nlc3MgPSBBcnJheS5mcm9tKHZpZGVvUXVldWUudmFsdWVzKCkpO1xuICAgICAgICB2aWRlb1F1ZXVlLmNsZWFyKCk7XG5cbiAgICAgICAgaWYgKHZpZGVvc1RvUHJvY2Vzcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGFkZEF1ZGl0TG9nKCdBbGFybSB0cmlnZ2VyZWQsIGJ1dCB2aWRlbyBxdWV1ZSB3YXMgZW1wdHkuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhZGRBdWRpdExvZyhgUHJvY2Vzc2luZyBxdWV1ZSB3aXRoICR7dmlkZW9zVG9Qcm9jZXNzLmxlbmd0aH0gdmlkZW9zLmApO1xuICAgICAgICBjb25zdCBjbGFzc2lmaWNhdGlvbnMgPSBhd2FpdCBjbGFzc2lmeVZpZGVvcyh2aWRlb3NUb1Byb2Nlc3MpO1xuXG4gICAgICAgIGlmIChjbGFzc2lmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFsbEl0ZW1zID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQobnVsbCwgcmVzb2x2ZSkpO1xuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXlzID0gT2JqZWN0LmtleXMoYWxsSXRlbXMpLmZpbHRlcihrID0+IGsuc3RhcnRzV2l0aCgndmlkZW8tY2xhc3NpZmljYXRpb24tJykpO1xuICAgICAgICAgICAgbGV0IG5ld0NhY2hlRW50cmllcyA9IHt9O1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHZpZGVvSWQgaW4gY2xhc3NpZmljYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xhc3NpZmljYXRpb24gPSBjbGFzc2lmaWNhdGlvbnNbdmlkZW9JZF07XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdmlkZW8tY2xhc3NpZmljYXRpb24tJHt2aWRlb0lkfWA7XG4gICAgICAgICAgICAgICAgbmV3Q2FjaGVFbnRyaWVzW2NhY2hlS2V5XSA9IHsgY2xhc3NpZmljYXRpb24sIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2FjaGVLZXlzLmxlbmd0aCArIE9iamVjdC5rZXlzKG5ld0NhY2hlRW50cmllcykubGVuZ3RoID4gTUFYX0NBQ0hFX0VOVFJJRVMpIHtcbiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgZXZpY3Rpb246IHJlbW92ZSBvbGRlc3QgZW50cmllcy4gQSBtb3JlIHNvcGhpc3RpY2F0ZWQgTFJVIHdvdWxkIGJlIGJldHRlci5cbiAgICAgICAgICAgICAgICBsZXQgc29ydGVkQ2FjaGUgPSBjYWNoZUtleXMubWFwKGtleSA9PiAoeyBrZXksIHRpbWVzdGFtcDogYWxsSXRlbXNba2V5XS50aW1lc3RhbXAgfSkpLnNvcnQoKGEsIGIpID0+IGEudGltZXN0YW1wIC0gYi50aW1lc3RhbXApO1xuICAgICAgICAgICAgICAgIGNvbnN0IG51bVRvUmVtb3ZlID0gTWF0aC5tYXgoMCwgY2FjaGVLZXlzLmxlbmd0aCArIE9iamVjdC5rZXlzKG5ld0NhY2hlRW50cmllcykubGVuZ3RoIC0gTUFYX0NBQ0hFX0VOVFJJRVMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleXNUb1JlbW92ZSA9IHNvcnRlZENhY2hlLnNsaWNlKDAsIG51bVRvUmVtb3ZlKS5tYXAoaXRlbSA9PiBpdGVtLmtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGtleXNUb1JlbW92ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2hyb21lLnN0b3JhZ2UubG9jYWwucmVtb3ZlKGtleXNUb1JlbW92ZSwgcmVzb2x2ZSkpO1xuICAgICAgICAgICAgICAgICAgICBhZGRBdWRpdExvZyhgUHJ1bmVkICR7a2V5c1RvUmVtb3ZlLmxlbmd0aH0gb2xkIGNhY2hlIGVudHJpZXMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldChuZXdDYWNoZUVudHJpZXMsIHJlc29sdmUpKTtcbiAgICAgICAgICAgIGFkZEF1ZGl0TG9nKGBDYWNoZWQgJHtPYmplY3Qua2V5cyhuZXdDYWNoZUVudHJpZXMpLmxlbmd0aH0gbmV3IGNsYXNzaWZpY2F0aW9ucy5gKTtcblxuICAgICAgICAgICAgLy8gTm90aWZ5IGNvbnRlbnQgc2NyaXB0cyBhYm91dCB0aGUgbmV3IGNsYXNzaWZpY2F0aW9uc1xuICAgICAgICAgICAgY2hyb21lLnRhYnMucXVlcnkoeyB1cmw6IFwiKjovL3d3dy55b3V0dWJlLmNvbS8qXCIgfSwgKHRhYnMpID0+IHtcbiAgICAgICAgICAgICAgICB0YWJzLmZvckVhY2godGFiID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiLmlkLCB7IHR5cGU6ICdDTEFTU0lGSUNBVElPTl9SRVNVTFQnLCBjbGFzc2lmaWNhdGlvbnMgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1JlY2VpdmluZyBlbmQgZG9lcyBub3QgZXhpc3QnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQ29udGVudCBzY3JpcHQgaW4gdGFiICR7dGFiLmlkfSBub3QgcmVhZHkgdG8gcmVjZWl2ZSBtZXNzYWdlLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNlbmRpbmcgbWVzc2FnZSB0byB0YWIgJHt0YWIuaWR9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmxldCB2aWRlb1F1ZXVlID0gbmV3IE1hcCgpO1xuY29uc3QgQkFUQ0hfREVMQVlfTUlOVVRFUyA9IDEwIC8gNjA7IC8vIDEwIHNlY29uZHNcblxuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChyZXF1ZXN0LCBzZW5kZXIsIHNlbmRSZXNwb25zZSkgPT4ge1xuICAgIGlmIChyZXF1ZXN0LnR5cGUgPT09ICdDTEFTU0lGWV9WSURFTycpIHtcbiAgICAgICAgY29uc3QgeyB2aWRlb0lkLCBtZXRhZGF0YSB9ID0gcmVxdWVzdDtcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdmlkZW8tY2xhc3NpZmljYXRpb24tJHt2aWRlb0lkfWA7XG5cbiAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KGNhY2hlS2V5LCByZXNvbHZlKSk7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWRJdGVtID0gcmVzdWx0W2NhY2hlS2V5XTtcbiAgICAgICAgICAgIGlmIChjYWNoZWRJdGVtICYmIChEYXRlLm5vdygpIC0gY2FjaGVkSXRlbS50aW1lc3RhbXAgPCBDQUNIRV9UVEwpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBSZXR1cm5pbmcgY2FjaGVkIGNsYXNzaWZpY2F0aW9uIGZvciB2aWRlbyAke3ZpZGVvSWR9OiAke2NhY2hlZEl0ZW0uY2xhc3NpZmljYXRpb259YDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBhZGRBdWRpdExvZyhtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoeyBjbGFzc2lmaWNhdGlvbjogY2FjaGVkSXRlbS5jbGFzc2lmaWNhdGlvbiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB2YWxpZCBjYWNoZSBlbnRyeSBmb3IgdmlkZW9JZCwgYWRkaW5nIHRvIHF1ZXVlOicsIHZpZGVvSWQpO1xuICAgICAgICAgICAgdmlkZW9RdWV1ZS5zZXQodmlkZW9JZCwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBhbGFybSBpcyBzZXQuIElmIGl0IGFscmVhZHkgZXhpc3RzLCB0aGlzIGRvZXMgbm90aGluZy5cbiAgICAgICAgICAgIGNocm9tZS5hbGFybXMuZ2V0KCdwcm9jZXNzLXZpZGVvLXF1ZXVlJywgKGFsYXJtKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFhbGFybSkge1xuICAgICAgICAgICAgICAgICAgICBjaHJvbWUuYWxhcm1zLmNyZWF0ZSgncHJvY2Vzcy12aWRlby1xdWV1ZScsIHsgZGVsYXlJbk1pbnV0ZXM6IEJBVENIX0RFTEFZX01JTlVURVMgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZEF1ZGl0TG9nKGBBbGFybSBcInByb2Nlc3MtdmlkZW8tcXVldWVcIiBjcmVhdGVkIHdpdGggYSAke0JBVENIX0RFTEFZX01JTlVURVMgKiA2MH1zIGRlbGF5LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBXZSB3aWxsIHJlc3BvbmQgYXN5bmNocm9ub3VzbHkgbGF0ZXIgYWZ0ZXIgYmF0Y2ggcHJvY2Vzc2luZ1xuICAgICAgICAgICAgLy8gRm9yIG5vdywgd2UgY2FuIHNlbmQgYSByZXNwb25zZSBpbmRpY2F0aW5nIGl0J3MgcXVldWVkLlxuICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHsgc3RhdHVzOiAncXVldWVkJyB9KTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3QudHlwZSA9PT0gJ2hpZGRlbl92aWRlb19jb3VudCcpIHtcbiAgICAgICAgY2hyb21lLmFjdGlvbi5zZXRCYWRnZVRleHQoeyB0ZXh0OiByZXF1ZXN0LmNvdW50LnRvU3RyaW5nKCkgfSk7XG4gICAgfVxufSk7XG4iXSwKICAibWFwcGluZ3MiOiAib0VBQUEsSUFBQUEsRUFBQUMsRUFBQSxLQUVBLElBQU1DLEVBQWMsb0NBSXBCLGVBQWVDLEVBQVlDLEVBQVMsQ0FDaEMsR0FBTSxDQUFFLFNBQUFDLEVBQVcsQ0FBQyxDQUFFLEVBQUksTUFBTSxJQUFJLFFBQVFDLEdBQVcsT0FBTyxRQUFRLE1BQU0sSUFBSSxXQUFZQSxDQUFPLENBQUMsRUFDOUZDLEVBQVksSUFBSSxLQUFLLEVBQUUsWUFBWSxFQUN6Q0YsRUFBUyxRQUFRLElBQUlFLENBQVMsS0FBS0gsQ0FBTyxFQUFFLEVBQ3hDQyxFQUFTLE9BQVMsS0FDbEJBLEVBQVMsT0FBUyxJQUV0QixNQUFNLElBQUksUUFBUUMsR0FBVyxPQUFPLFFBQVEsTUFBTSxJQUFJLENBQUUsU0FBQUQsQ0FBUyxFQUFHQyxDQUFPLENBQUMsQ0FDaEYsQ0FFQSxPQUFPLFFBQVEsWUFBWSxZQUFZLElBQU0sQ0FDM0MsT0FBTyxRQUFRLE1BQU0sSUFBSSxpQkFBbUJFLEdBQVcsQ0FDckQsR0FBSSxDQUFDQSxFQUFPLGVBQWdCLENBQzFCLElBQU1DLEVBQWlCLEtBQUssT0FBTyxXQUFXLEVBQzlDLE9BQU8sUUFBUSxNQUFNLElBQUksQ0FBRSxlQUFBQSxDQUFlLEVBQUcsSUFBTSxDQUNqRCxRQUFRLElBQUksd0NBQXlDQSxDQUFjLEVBQ25FTixFQUFZLHNCQUFzQixD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QUFZLE1BQVksQ0FDL0QsSUFBTXJDLEVBQVUsNkNBQTZDb0IsQ0FBTyxLQUFLaUIsRUFBVyxjQUFjLEdBQ2xHLFFBQVEsSUFBSXJDLENBQU8sRUFDbkJELEVBQVlDLENBQU8sRUFDbkJtQyxFQUFhLENBQUUsZUFBZ0JFLEVBQVcsY0FBZSxDQUFDLEVBQzFELE1BQ0osQ0FFQSxRQUFRLElBQUkscURBQXNEakIsQ0FBTyxFQUN6RU4sRUFBVyxJQUFJTSxFQUFTZ0IsQ0FBUSxFQUVoQyxPQUFPLE9BQU8sSUFBSSxzQkFBd0J4QixHQUFVLENBQzNDQSxJQUNELE9BQU8sT0FBTyxPQUFPLHNCQUF1QixDQUFFLGVBQWdCb0IsQ0FBb0IsQ0FBQyxFQUNuRmpDLEVBQVksOENBQThDaUMsRUFBc0IsRUFBRSxVQUFVLEVBRXBHLENBQUMsRUFJREcsRUFBYSxDQUFFLE9BQVEsUUFBUyxDQUFDLENBQ3JDLEdBQUcsRUFFSSxFQUNYLE1BQVdGLEVBQVEsT0FBUyxzQkFDeEIsT0FBTyxPQUFPLGFBQWEsQ0FBRSxLQUFNQSxFQUFRLE1BQU0sU0FBUyxDQUFFLENBQUMsQ0FFckUsQ0FBQyIsCiAgIm5hbWVzIjogWyJyZXF1aXJlX3NlcnZpY2Vfd29ya2VyIiwgIl9fY29tbW9uSlNNaW4iLCAiQkFDS0VORF9VUkwiLCAiYWRkQXVkaXRMb2ciLCAibWVzc2FnZSIsICJhdWRpdExvZyIsICJyZXNvbHZlIiwgInRpbWVzdGFtcCIsICJyZXN1bHQiLCAiaW5zdGFsbGF0aW9uSWQiLCAiY2xhc3NpZnlWaWRlb3MiLCAidmlkZW9zIiwgImxhc3RCYWNrZW5kRmFpbFRzIiwgInJlc3BvbnNlIiwgImRhdGEiLCAiZXJyb3IiLCAiYWxhcm0iLCAidmlkZW9zVG9Qcm9jZXNzIiwgInZpZGVvUXVldWUiLCAiY2xhc3NpZmljYXRpb25zIiwgImFsbEl0ZW1zIiwgImNhY2hlS2V5cyIsICJrIiwgIm5ld0NhY2hlRW50cmllcyIsICJ2aWRlb0lkIiwgImNsYXNzaWZpY2F0aW9uIiwgImNhY2hlS2V5IiwgInNvcnRlZENhY2hlIiwgImtleSIsICJhIiwgImIiLCAibnVtVG9SZW1vdmUiLCAia2V5c1RvUmVtb3ZlIiwgIml0ZW0iLCAidGFicyIsICJ0YWIiLCAiQkFUQ0hfREVMQVlfTUlOVVRFUyIsICJyZXF1ZXN0IiwgInNlbmRlciIsICJzZW5kUmVzcG9uc2UiLCAibWV0YWRhdGEiLCAiY2FjaGVkSXRlbSJdCn0K
